# nginx conf generated by arm s3k installer
# [dmn]: comments
#

# NOTE: deb: nginx 1.25.2 /usr/local/
# NOTE: win: nginx 1.25.2 ~/apps/

# NOTE: nginx.conf (4win) == nginx.conf (4lin)

# legend:
#
# def    : default value (from nginx docs)
# defcfg : value in default nginx config file
# s3kcfg : value in s3k nginx config file
# ++ : present
# -- : absent
# // : commented out
# xx : value: not applicable

# docs:
#
# ngx_core_module      https://nginx.org/en/docs/ngx_core_module.html
# ngx_http_core_module https://nginx.org/en/docs/http/ngx_http_core_module.html
# ngx_http_ssl_module  https://nginx.org/en/docs/http/ngx_http_ssl_module.html
# ngx_http_log_module  https://nginx.org/en/docs/http/ngx_http_log_module.html
# ngx_http_gzip_module https://nginx.org/en/docs/http/ngx_http_gzip_module.html




# problems including this file to default server's nginx.conf
# (in top level)
#
# - duplicate worker_processes directive
# - duplicate events           directive
# - duplicate http             directive




### --- ngx_core_module settings: --------------

worker_processes 1; # def: 1; defcfg: 1; s3kcfg: 1

pid C:/ProgramData/bolid/ARMS3000/db/nginx/nginx.pid;
# def: logs/nginx.pid; defcfg: //; s3kcfg: C:/ProgramData/bolid/ARMS3000/db/nginx/nginx.pid

### ---------------------------------------


include C:/ProgramData/bolid/ARMS3000/conf/nginx/modules-enabled/*.conf;

# NOTE: there's no /modules-enabled/ dir


events {
    worker_connections 768;
    # multi_accept on;
}




http {

### --- ngx_http_core_module settings: --------------

    sendfile   on; # def: off; defcfg: on; s3kcfg: on
    tcp_nopush on; # def: off; defcfg: //; s3kcfg: on
    # // ^- used only if 'sendfile' is 'on'

    tcp_nodelay on; # def: on; defcfg: --; s3kcfg: on

    keepalive_timeout 65; # def: 75; defcfg: 75; s3kcfg: 65

    types_hash_max_size 2048; # def: 1024; defcfg: --; s3kcfg: 2048

    include       mime.types;               # def: xx; defcfg: ++; s3kcfg: ++
    default_type  application/octet-stream; # def: text/plain; defcfg: ++; s3kcfg: application/octet-stream

### ---------------------------------------


### --- ngx_http_ssl_module settings: --------------

    ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE
           # def: TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; defcfg: --; s3kcfg: ++

    ssl_prefer_server_ciphers on; # def: off; defcfg: //; s3kcfg: on

### ---------------------------------------


### --- ngx_http_log_module settings: --------------

    access_log C:/ProgramData/bolid/ARMS3000/log/nginx/access.log;
    # def: logs/access.log; defcfg: //; s3kcfg: C:/ProgramData/bolid/ARMS3000/log/nginx/access.log

### ---------------------------------------


### --- ngx_core_module settings: --------------

    error_log C:/ProgramData/bolid/ARMS3000/log/nginx/error.log;
    # def: logs/access.log; defcfg: //; s3kcfg: C:/ProgramData/bolid/ARMS3000/log/nginx/error.log

### ---------------------------------------


    ## Disable Logging
    access_log off;
    error_log off;

    # from ngx_http_log_module docs:
    #
    # "The special value 'off' cancels all 'access_log'
    #  directives on the current level."

    # NOTE: value 'off' for 'error_log' is not documented


### --- ngx_http_gzip_module settings: --------------

    gzip  on;              # def: off; defcfg: //; s3kcfg: on
    gzip_vary on;          # def: off; defcfg: --; s3kcfg: on
    gzip_proxied any;      # def: off; defcfg: --; s3kcfg: any
    gzip_comp_level 6;     # def: 1;   defcfg: --; s3kcfg: 6
    gzip_buffers 16 8k;    # def: 32 4k|16 8k; defcfg: --; s3kcfg: 16 8k
    gzip_http_version 1.1; # def: 1.1; defcfg: --; s3kcfg: 1.1
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
    # def: text/html; defcfg: --; s3kcfg: text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript

### ---------------------------------------


    ## Virtual Host Configs
    include C:/ProgramData/bolid/ARMS3000/conf/nginx/conf.d/*.conf;
    include C:/ProgramData/bolid/ARMS3000/conf/nginx/sites-enabled/*.conf;

    # NOTE: there's no /conf.d/ dir
    # NOTE: /sites-enabled/ contains 1 file:
    #       http.conf with the only 'server' section ("context" - nginx parlance):
    #       /ARMS3000/conf/nginx/sites-enabled/http.conf

}

