# bolid-arm-s3000-doc / quick-start

# АРМ С3000: быстрый старт



## TOC: original (`Инструкция по быстрому старту АРМ С3000 23_03_02.pdf`)

- 1 Установка ПО
- 2 Подключение к системе
- 3 Дата и время
- 4 Использование https протокола. Установка SSL сертификата
  - 4.1 Генерация самоподписанного сертификата
  - 4.2 Установка сертификата в ОС Windows
  - 4.3 Включение доступа к системе по https
- 5 Подключение устройств
- 6 Настройка пульта для работы с «АРМ С3000»
- 7 Подключение устройств за «С2000-Ethernet». Создание порта «С2000-Ethernet»
- 8 Создание линий
- 9 Конфигурация устройств
  - 9.1 Чтение конфигурации из пульта
  - 9.2 Создание конфигурации для пульта
  - 9.3 Создание конфигурации для линии без пульта
  - 9.4 Загрузка конфигураций в АРМ С3000
  - 9.5 Применение конфигураций в АРМ С3000
- 10 Рассылка уведомлений. Настройка Телеграмм бота
- 11 Добавление новых пользователей
- 12 Штатное использование


# TOC: WIP

- Введение
- Соглашения и условные обозначения
  - Словом *пульт* будем обозначать устройства `С2000М` и `С2000М исп. 02`,
    оговаривая, где это необходимо, различия между ними
  - **Внимание:** так обозначены важные замечания.
- Сокращения
- Установка ПО
  - supported OS
  - link:
    - docker-linux.md
    - docker-windows.md
    - win.md
- Подключение к системе
  - localhost
  - http port
  - mention port forwarding // ?
  - default login/password
- Дата и время
  - important for:
    - s2km
    - telegram bot
- Использование защищенного соединения // was: протокола https
  - important, highly recommended (that's why it here)
  - generate self-signed certificate (web-interface)
  - download generated cert
  - install cert (Windows): to "Trusted Root Certification Authorities"
- Подключение устройств
  - "Line" definition
- "Режим конфигурации" - manual 2.3.5.1, p.71
  - on pages: devices, staff, configs



# `2ASK`:
- "В пожарных системах **s3k** может использоваться
   только для целей диспетчеризации."
  - should we explain why
  - what systems
  - `wtf` "диспетчеризация" (see dispatch)



# WIP: text

## Введение

`2DO` short description

Руководство именуется "быстрым стартом", что отражает главную
его цель: по возможности, быстрее вести читателя в курс дела,
ознакомить с новой системой и позволить начать её эксплуатацию.

Предназначено для технических специалистов, имеющих опыт работы
с программными продуктами и аппаратными средствами разработки
компании **Bolid**.

Не берясь во всей полноте раскрыть здесь возможности **s3k** и
описать параметры конфигурации, мы, тем не менее,
выделим основные моменты, касающиеся и того, и другого.

Описывая вкратце тот или иной аспект системы, мы будем
отсылать читателя к соответствующим документам, где
можно будет найти более полную информацию и справочные
данные.

## Установка **s3k**

**s3k** поставляется в виде образов **Docker** для систем
Windows и Linux, а также программы установки **s3k**
в качестве службы (service) для ОС Windows.

Поддерживаются несколько дистрибутивов Linux, в том числе
Alpine, Astra и Ubuntu нескольких версий.

Системные требования и инструкции по установке
содержатся в соответствующих документах:

- [Установка образов Docker в ОС Linux](docker-linux.md)
- [установка образов Docker в ОС Windows](docker-windows.md)
- [Установка в ОС Windows](win.md)

## Подключение и вход в систему

После запуска, **s3k** будет доступна на всех сетевых интерфейсах
по протоколу HTTP. Порт для соединения задайтся при установке
(см. раздел "Установка" выше). Например: `http://127.0.0.1:20080`.

Для доступа и работы с системой используется web-интерфейс.

При успешном подключении в браузере откроется страница входа
в систему. Следует ввести установленные изначально имя
пользователя ("admin") и пароль ("armS3000").

Данные учетной записи `admin` рекомендуется сразу же изменить,
задав новый пароль.

Также следует рассмотреть переход на защищенное соединение
по протоколу HTTPS (см. "Использование защищенного соединения").

## Дата и время

Важно убедиться в том, что часовой пояс, дата и время на
локальной машине установлены правильно.

Это установки влияют как на работу самой системы **s3k**,
так и на подключенные устройства: при установлении соединения
им отправляется команда синхронизировать дату и время с **s3k**.

Корректные дата и время требуются также для функционирования
мессенджера Telegram (используется для рассылки уведомлений,
см. "Рассылка уведомлений. Telegram").

## Использование защищенного соединения

- `2ASK` самоподписанный => самозаверенный

При работе с сетевыми приложениями, рекомендации по безопасности
включают в себя не только защиту учетной записи администратора,
но также и установление соединения по защищенному протоколу HTTPS.

В этом разделе будет рассмотрена простейшая настройка
**s3k** для организации безопасного соединения.

Прежде всего необходимо создать самоподписанный сертификат
в web-интерфейсе на странице *`Общая настройка`* →
*`SSL Сертификаты`* → *`Самоподписанный сертификат`*.

Из параметров достаточно указать IP-адрес или DNS-имя машины с **s3k**
(возможно добавление нескольких адресов и имен) и срок действия.

- **Внимание:**<br />
В системе может быть установлен лишь один сертификат.
После нажатия на кнопку "Сгенерировать" новый сертификат
будет создан и *заменит* собой установленный ранее.

Включить параметр "Доступ к устройству по протоколу https"
на странице *`Общая настройка`* → *`Сервисное обслуживание`* →
*`Прочие настройки`*, после чего система готова к приему
соединений по протоколу HTTPS.

Настроив программное обеспечение для работы по HTTPS
на рабочих станциях (см. ниже), возможность соединения
по протоколу HTTP можно отключить на этой же странице.

- **Внимание:**<br />
При изменении параметров на странице настройки, система **s3k**
перезапускается, после чего требуется произвести повторный вход
всем подключенным пользователям.

Осталось настроить соединение со стороны клиентского ПО.

Для ОС Windows требуется скачать и установить созданный ранее сертификат,
нажав на странице *`Общая настройка`* → *`SSL Сертификаты`* →
*`Установленный`* кнопку "Скачать цепочку".

Открыв скачанный файл, в списке сертификатов дважды щелкнуть левой
кнопкой мыши тот, имя которого начинается с "Root CA ARM S3000".
Нажать кнопку "Установить сертификат..." и в качестве целевого хранилища
указать "Доверенные корневые центры сертификации" ("Trusted Root
Certification Authorities").

# Подключение устройств

`2C`: manual 2.2.3 Схема внешних соединений

Устройства ИСО "Орион" могут быть подключены к **s3k**
через следующие интерфесы:
- RS-232 (порт COM или USB преобразователь)
- RS-485 (как правило, посредством USB преобразователя)
- по сети, используя **s2k-eth**
  (в **s3k** создается виртуальный последовательный порт)

Приборы могут подключаются как напрямую, так и через
преобразователи интерфейсов.

С устройствами, поддерживающими интерфейсы RS-232 и RS-485,
чаще всего применяются преобразователи, например, USB -
для удобства подключения к компьютеру.

Настройка производится посредством добавления *порта* - `RS` или
`С2000-Ethernet` на странице *`Конфигурирование структуры объекта`* →
*`Приборы`*.

Далее на вкладке *`Линии и протоколы`* добавляется так называемая
*линия* для подключения устройств - это определенный *порт* и ряд
настроек, таких как *протокол*, скорость соединения и т.д.

Для взаимодействия с устройствами может использоваться один
из двух *протоколов*: `Орион Про` или `Орион`. Первый применяется
для связи с *пультом*, второй - при подключении приборов напрямую, без пульта.


from qstart:
```
Совокупность порта, через который идет обмен
и протокола (и его настроек).
Каждая линия независима от других и
независима от типа порта.
```
`wtf` типа порта

from manual:
```
Линии «АРМ С3000» представляют собой интерфейсы
(совокупность порта и протокола),
к которым подключаются устройства ИСО «Орион»,
в том числе и через преобразователи «С2000-Ethernet»,
работающие в прозрачном режиме.
Каждая линия независима от других и независима от типа порта.
```

from manual, `wtf` "virt. line":
```
Примечание.
В «АРМ С3000» к одной виртуальной линии можно подключать
только один преобразователь «С2000-Ethernet».
```

